{% extends "base.html" %}
{% block content %}
<div class="form-panel">
  <h2>Laborer Registration</h2>
  <form method="post" action="{{ url_for('register', role='labor') }}">
    <label>Name</label><input name="name" required>

<label for="dob">Date of Birth:</label>
<input type="date" id="dob" name="dob" onchange="calculateAge()" required>

<label for="age">Age:</label>
<input type="text" id="age" name="age" readonly>

<script>
function calculateAge() {
    const dob = document.getElementById('dob').value;
    if (!dob) return;

    const birthDate = new Date(dob);
    const today = new Date();
    let age = today.getFullYear() - birthDate.getFullYear();
    const monthDiff = today.getMonth() - birthDate.getMonth();

    // Adjust age if birthday hasn't occurred yet this year
    if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {
        age--;
    }

    document.getElementById('age').value = age;
}
</script>

<label for="gender">Gender:</label>
        <select id="gender" name="gender" required>
            <option value="">Select Gender</option>
            <option value="male">Male</option>
            <option value="female">Female</option>
            <option value="others">Others</option>
        </select>

    <label>Address</label><input name="address" required>
    <label>Contact Number</label><input name="contact" required>
    <label>Skills / Experience</label>
    <textarea name="skills" rows="3" placeholder="E.g., Tractor operation, Harvesting"></textarea>

        <label for="outstation">Ready to Work Outstation:</label>
        <select id="outstation" name="outstation" required>
            <option value="">Select Option</option>
            <option value="yes">Yes</option>
            <option value="no">No</option>
        </select>


    <label>Username</label><input name="username" required>
    <label>Password</label><input name="password" type="password" required>

    <div class="form-actions">
      <button class="btn">Register</button>
      <a class="btn light" href="{{ url_for('home') }}">Cancel</a>
    </div>
  </form>
</div>
{% endblock %}
