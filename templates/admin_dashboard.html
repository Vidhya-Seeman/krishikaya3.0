{% extends "base.html" %}
{% block content %}
<div class="panel">
  <h2>Admin Dashboard</h2>
  <a href="{{ url_for('logout') }}" class="logout">Logout</a>
</div>

<!-- Toasts -->
{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <div class="toast-container">
      {% for category, msg in messages %}
        <div class="toast {{ category }}">{{ msg }}</div>
      {% endfor %}
    </div>
  {% endif %}
{% endwith %}

<section>
  <h3>Registered Landowners</h3>
  <table>
    <thead><tr><th>ID</th><th>Name</th><th>Username</th><th>Contact</th><th>Acres</th><th>Crops</th></tr></thead>
    <tbody>
      {% for l in landowners %}
        <tr><td>{{ l.id }}</td><td>{{ l.name }}</td><td>{{ l.username }}</td><td>{{ l.contact }}</td><td>{{ l.acres }}</td><td>{{ l.crops }}</td></tr>
      {% else %}
        <tr><td colspan="6">No landowners</td></tr>
      {% endfor %}
    </tbody>
  </table>
</section>

<section>
  <h3>Registered Laborers</h3>
  <table>
    <thead><tr><th>ID</th><th>Name</th><th>Username</th><th>Contact</th></tr></thead>
    <tbody>
      {% for l in labors %}
        <tr><td>{{ l.id }}</td><td>{{ l.name }}</td><td>{{ l.username }}</td><td>{{ l.contact }}</td></tr>
      {% else %}
        <tr><td colspan="4">No laborers</td></tr>
      {% endfor %}
    </tbody>
  </table>
</section>

<section>
  <h3>Registered Machineries</h3>
  <table>
    <thead><tr><th>ID</th><th>Owner</th><th>Machine Type</th><th>Contact</th></tr></thead>
    <tbody>
      {% for m in machineries %}
        <tr><td>{{ m.id }}</td><td>{{ m.name }}</td><td>{{ m.machine_type }}</td><td>{{ m.contact }}</td></tr>
      {% else %}
        <tr><td colspan="4">No machineries</td></tr>
      {% endfor %}
    </tbody>
  </table>
</section>

<section>
  <h3>All Bookings</h3>
  <table>
    <thead><tr><th>ID</th><th>Landowner</th><th>Type</th><th>Date</th><th>Days</th><th>Labor Status</th><th>Machinery Status</th></tr></thead>
    <tbody>
  {% for b in bookings %}
    <tr>
      <td>{{ b.id }}</td>
      <td>{{ b.landowner_name }}</td>
      <td>{{ b.service_type }}</td>
      <td>{{ b.service_date }}</td>
      <td>{{ b.days }}</td>
      <td>{{ b.labor_status }}</td>
      <td>{{ b.machinery_status }}</td>
      <td>{{ b.action }}</td>
    </tr>
  {% else %}
    <tr><td colspan="8">No bookings</td></tr>
  {% endfor %}
</tbody>

  </table>
</section>
{% endblock %}
